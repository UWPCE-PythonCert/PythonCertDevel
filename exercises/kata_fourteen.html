

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Kata Fourteen: Tom Swift Under Milk Wood &mdash; PythonCert 4.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="PythonCert 4.0 documentation" href="../index.html"/>
        <link rel="next" title="lambda and keyword Magic" href="lambda_magic.html"/>
        <link rel="prev" title="HTML Renderer Exercise" href="html_renderer.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> PythonCert
          

          
          </a>

          
            
            
              <div class="version">
                4.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../class_schedule/orientation.html">Orientation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../class_schedule/session_1_01.html">Intro to Python Session 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_schedule/session_1_02.html">Intro to Python Session 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_schedule/session_1_03.html">Intro to Python Session 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_schedule/session_1_04.html">Intro to Python Session 4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_schedule/session_1_05.html">Intro to Python Session 5</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_schedule/session_1_06.html">Intro to Python Session 6</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_schedule/session_1_07.html">Intro to Python Session 7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_schedule/session_1_08.html">Intro to Python Session 8</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_schedule/session_1_09.html">Intro to Python Session 9</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_schedule/session_1_10.html">Intro to Python Session 10</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../class_schedule/session_2_01.html">Advanced Programming in Python: Session 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_schedule/session_2_02.html">Advanced Programming in Python: Session 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_schedule/session_2_03.html">Advanced Programming in Python: Session 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_schedule/session_2_04.html">Advanced Programming in Python: Session 4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_schedule/session_2_05.html">Advanced Programming in Python: Session 5</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_schedule/session_2_06.html">Advanced Programming in Python: Session 6</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_schedule/session_2_07.html">Advanced Programming in Python: Session 7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_schedule/session_2_08.html">Advanced Programming in Python: Session 8</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_schedule/session_2_09.html">Advanced Programming in Python: Session 9</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_schedule/session_2_10.html">Advanced Programming in Python: Session 10</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../class_schedule/session_3_01.html">Internet Programming in Python: Session 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_schedule/session_3_02.html">Internet Programming in Python: Session 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_schedule/session_3_03.html">Internet Programming in Python: Session 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_schedule/session_3_04.html">Internet Programming in Python: Session 4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_schedule/session_3_05.html">Internet Programming in Python: Session 5</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_schedule/session_3_06.html">Internet Programming in Python: Session 6</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_schedule/session_3_07.html">Internet Programming in Python: Session 7</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_schedule/session_3_08.html">Internet Programming in Python: Session 8</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_schedule/session_3_09.html">Internet Programming in Python: Session 9</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class_schedule/session_3_10.html">Internet Programming in Python: Session 10</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules/Class_introduction.html">Introductions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/BasicPython.html">Basic Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/Git.html">Intro to Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/GitWorkflow.html">Git Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/Functions.html">More on Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/Documentation.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/Booleans.html">Boolean Expressions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/Modules.html">Code Structure, Modules, and Namespaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/Sequences.html">Python Sequences</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/Iteration.html">Iteration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/Strings.html">Strings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/DictsAndSets.html">Dictionaries and Sets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/Files.html">File Reading and Writing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/Exceptions.html">Exception Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/Comprehensions.html">Comprehensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/AdvancedArgumentPassing.html">Advanced Argument Passing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/DictionaryAsSwitch.html">Using a Dictionary to <code class="docutils literal"><span class="pre">switch</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/Closures.html">Closures and function Currying</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/ContextManagers.html">Context Managers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/Decorators.html">Decorators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/EnvironmentOverview.html">Introduction to the Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/IPythonIntroduction.html">IPython Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/IteratorsAndGenerators.html">Iterators and Generators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/Lambda.html">Anonymous Functions: Lambda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/MapFilterReduce.html">Map Filter and Reduce</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/Math.html">Math with Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/MultipleInheritance.html">Multiple Inheritance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/ObjectOrientationOverview.html">Object Orientation Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/Properties.html">Properties</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/Py2vsPy3.html">Python 2 verses Python 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/PythonClasses.html">Python Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/PythonOverview.html">Python Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/Recursion.html">Recursion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/SpecialMethodsAndProtocols.html">Special Methods &amp; Protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/StaticAndClassMethods.html">Static and Class Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/SubclassingAndInheritance.html">Subclassing and Inheritance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/Testing.html">Unit Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../modules/Tutorial.html">Python Tutorial</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quizzes/basic_math_quiz.html">Basic Math Quiz</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quizzes/comprehensions_quiz.html">Comprehensions Quiz</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="python_pushups.html">Python Pushups</a></li>
<li class="toctree-l1"><a class="reference internal" href="args_kwargs_lab.html">Args and Kwargs LAB</a></li>
<li class="toctree-l1"><a class="reference internal" href="circle_class.html">Circle Class Excercise</a></li>
<li class="toctree-l1"><a class="reference internal" href="dict_lab.html">Dictionary and Set Lab</a></li>
<li class="toctree-l1"><a class="reference internal" href="exceptions_lab.html">Exceptions Lab</a></li>
<li class="toctree-l1"><a class="reference internal" href="fib_and_lucas.html">Fibonacci Series Exercise</a></li>
<li class="toctree-l1"><a class="reference internal" href="file_lab.html">File LAB</a></li>
<li class="toctree-l1"><a class="reference internal" href="fizz_buzz.html">Fizz Buzz Exercise</a></li>
<li class="toctree-l1"><a class="reference internal" href="grid_printer.html">Grid Printer Exercise</a></li>
<li class="toctree-l1"><a class="reference internal" href="html_renderer.html">HTML Renderer Exercise</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Kata Fourteen: Tom Swift Under Milk Wood</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#trigrams">Trigrams</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#the-problem">The Problem</a></li>
<li class="toctree-l3"><a class="reference internal" href="#objectives">Objectives</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="lambda_magic.html">lambda and keyword Magic</a></li>
<li class="toctree-l1"><a class="reference internal" href="list_lab.html">List Lab</a></li>
<li class="toctree-l1"><a class="reference internal" href="mailroom.html">Mailroom</a></li>
<li class="toctree-l1"><a class="reference internal" href="unit_testing.html">Introduction To Unit Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="roman.html">Roman/Arabic Numeral Converter</a></li>
<li class="toctree-l1"><a class="reference internal" href="rot13.html">ROT13</a></li>
<li class="toctree-l1"><a class="reference internal" href="slicing.html">Slicing Lab</a></li>
<li class="toctree-l1"><a class="reference internal" href="sparse_array.html">Sparse Array Exercise</a></li>
<li class="toctree-l1"><a class="reference internal" href="string_formatting.html">String Formatting Lab</a></li>
<li class="toctree-l1"><a class="reference internal" href="trapezoid.html">Trapezoidal Rule</a></li>
<li class="toctree-l1"><a class="reference internal" href="mailroom-oo.html">Mailroom Object Oriented</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../supplemental/HowToRunAPythonFile.html">How to run a python file</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../supplemental/installing/index.html">Installing Python and core tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../supplemental/dev_environment/index.html">Setting Up A Development Environment For Python</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../references/index.html">Resources for Specific Python Topics</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../scripts/Functions.html">Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scripts/Methods.html">Methods</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PythonCert</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Kata Fourteen: Tom Swift Under Milk Wood</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/exercises/kata_fourteen.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="kata-fourteen-tom-swift-under-milk-wood">
<span id="exercise-trigrams"></span><h1>Kata Fourteen: Tom Swift Under Milk Wood<a class="headerlink" href="#kata-fourteen-tom-swift-under-milk-wood" title="Permalink to this headline">¶</a></h1>
<p>Adapted from Dave Thomas’s work:</p>
<p><a class="reference external" href="http://codekata.com/kata/kata14-tom-swift-under-the-milkwood/">http://codekata.com/kata/kata14-tom-swift-under-the-milkwood/</a></p>
<div class="section" id="trigrams">
<h2>Trigrams<a class="headerlink" href="#trigrams" title="Permalink to this headline">¶</a></h2>
<p>Trigrams can be used to mutate text into new, surreal, forms. But what
heuristics do we apply to get a reasonable result?</p>
<div class="section" id="the-problem">
<h3>The Problem<a class="headerlink" href="#the-problem" title="Permalink to this headline">¶</a></h3>
<p>As a boy, one of my treats was go to the shops on a Saturday and spend part
of my allowance on books; for a nine-year old, I had quite a collection of
Tom Swift and Hardy Boys. Wouldn’t it be great to be able to create
more and more of these classic books, to be able to generate a new Tom
Swift adventure on demand?</p>
<p>OK, perhaps not. But that won’t stop us trying. I coded up a quick
program to generate some swash-buckling scientific adventure on demand. It
came up with:</p>
<blockquote>
<div><p>… it was in the wind that was what he thought was his companion. I
think would be a good one and accordingly the ship their situation
improved. Slowly so slowly that it beat the band! You’d think no one
was a low voice. “Don’t take any of the elements and the
inventors of the little Frenchman in the enclosed car or cabin completely
fitted up in front of the gas in the house and wringing her hands.
“I’m sure they’ll fall!”</p>
<p>She looked up at them. He dug a mass of black vapor which it had
refused to accept any. As for Mr. Swift as if it goes too high I’ll
warn you and you can and swallow frequently. That will make the airship was
shooting upward again and just before the raid wouldn’t have been
instrumental in capturing the scoundrels right out of jail.”</p>
</div></blockquote>
<p>Stylistically, it’s Victor Appleton meets Dylan Thomas. Technically,
it’s all done with trigrams.</p>
<p>Trigram analysis is very simple. Look at each set of three adjacent words
in a document. Use the first two words of the set as a key, and remember
the fact that the third word followed that key. Once you’ve finished,
you know the list of individual words that can follow each two word
sequence in the document. For example, given the input:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">I</span> <span class="n">wish</span> <span class="n">I</span> <span class="n">may</span> <span class="n">I</span> <span class="n">wish</span> <span class="n">I</span> <span class="n">might</span>
</pre></div>
</div>
<p>You might generate:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="s2">&quot;I wish&quot;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s2">&quot;I&quot;</span><span class="p">,</span> <span class="s2">&quot;I&quot;</span><span class="p">]</span>
<span class="s2">&quot;wish I&quot;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s2">&quot;may&quot;</span><span class="p">,</span> <span class="s2">&quot;might&quot;</span><span class="p">]</span>
<span class="s2">&quot;may I&quot;</span>  <span class="o">=&gt;</span> <span class="p">[</span><span class="s2">&quot;wish&quot;</span><span class="p">]</span>
<span class="s2">&quot;I may&quot;</span>  <span class="o">=&gt;</span> <span class="p">[</span><span class="s2">&quot;I&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>This says that the words “I wish” are twice followed by the word
“I”, the words “wish I” are followed once by
“may” and once by “might” and so on.</p>
<p>To generate new text from this analysis, choose an arbitrary word pair as a
starting point. Use these to look up a random next word (using the table
above) and append this new word to the text so far. This now gives you a
new word pair at the end of the text, so look up a potential next word
based on these. Add this to the list, and so on. In the previous example,
we could start with “I may”. The only possible next word is
“I”, so now we have:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">I</span> <span class="n">may</span> <span class="n">I</span>
</pre></div>
</div>
<p>The last two words are “may I”, so the next word is
“wish”. We then look up “I wish”, and find our choice
is constrained to another “I”.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">I</span> <span class="n">may</span> <span class="n">I</span> <span class="n">wish</span> <span class="n">I</span>
</pre></div>
</div>
<p>Now we look up “wish I”, and find we have a choice. Let’s
choose “may”:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">I</span> <span class="n">may</span> <span class="n">I</span> <span class="n">wish</span> <span class="n">I</span> <span class="n">may</span>
</pre></div>
</div>
<p>Now we’re back where we started from, with “I may.”
Following the same sequence, but choosing “might” this time, we
get:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">I</span> <span class="n">may</span> <span class="n">I</span> <span class="n">wish</span> <span class="n">I</span> <span class="n">may</span> <span class="n">I</span> <span class="n">wish</span> <span class="n">I</span> <span class="n">might</span>
</pre></div>
</div>
<p>At this point we stop, as no sequence starts “I might.”</p>
<p>Given a short input text, the algorithm isn’t too interesting. Feed
it a book, however, and you give it more options, so the resulting output
can be surprising.</p>
<p>For this kata, try implementing a trigram algorithm that generates a couple
of hundred words of text using a book-sized file as input.
<a class="reference external" href="http://www.gutenberg.org/">Project Gutenberg</a> is a good source of online
books (Tom Swift and His Airship is <a class="reference external" href="http://sailor.gutenberg.org/etext02/03tom10.txt">here</a>.)</p>
<p>Be warned that these files have DOS line endings (carriage return followed by
newline).</p>
<p>There is a copy of sherlock holmes right here:</p>
<p><a class="reference download internal" href="../_downloads/sherlock.txt" download=""><code class="xref download docutils literal"><span class="pre">sherlock.txt</span></code></a>.</p>
<p>And a shorter copy for testing:</p>
<p><a class="reference download internal" href="../_downloads/sherlock_small.txt" download=""><code class="xref download docutils literal"><span class="pre">sherlock_small.txt</span></code></a>.</p>
</div>
<div class="section" id="objectives">
<h3>Objectives<a class="headerlink" href="#objectives" title="Permalink to this headline">¶</a></h3>
<p>Kata’s are about trying something many times. In this one, what
we’re experimenting with is not just the code, but the heuristics of
processing the text. What do we do with punctuation? Paragraphs? Do we have
to implement backtracking if we chose a next word that turns out to be a
dead end?</p>
<p>I’ll fire the signal and the fun will commence…</p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="lambda_magic.html" class="btn btn-neutral float-right" title="lambda and keyword Magic" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="html_renderer.html" class="btn btn-neutral" title="HTML Renderer Exercise" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Christopher Barker, Cris Ewing, Christy Heaton, Maria McKinley, Rick Riehle, Joseph Schilz.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'4.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>